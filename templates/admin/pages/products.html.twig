{% extends 'admin/base_admin.html.twig' %}

{% block title %}PULSE - Gestion produits{% endblock %}

{% block admin_content %}

        
  <div class="pageHeader">
    <div>
      <h2>Gestion produits</h2>
      <div class="pageSub">Produits + images + stock.</div>
    </div>
    <div class="formActions"><a class="btn btnPrimary" href="{{ path('admin_product_new') }}">+ Nouveau produit</a></div>
  </div>
  
  <div class="filtersBar">
    <div class="filterGroup"><label>Recherche</label><input type="text" placeholder="name, sku" /></div>
<div class="filterGroup"><label>Team</label><input type="text" placeholder="team" /></div>
<div class="filterGroup"><label>Actif</label><select><option>ALL</option><option>true</option><option>false</option></select></div>
  </div>
  <section class="panel">
    <div class="panelHeader"><h3 class="panelTitle">LISTE</h3></div>
    
  <div class="dataTableWrap">
    <table class="dataTable">
        <thead><tr><th>image</th><th>product_id</th><th>name</th><th>team</th><th>price</th><th>stock_qty</th><th>is_active</th><th>Actions</th></tr></thead>
      <tbody>
        {% for product in products %}
        <tr>
          <td>
            <span class="avatarSmall">{{ product.name is defined and product.name|length > 0 ? product.name|slice(0,1)|upper : '?' }}</span>
          </td>
          <td>{{ product.productId }}</td>
          <td>{{ product.name }}</td>
          <td>{{ product.teamId ? product.teamId.name : '' }}</td>
          <td>{{ product.price }} DT</td>
          <td>{{ product.stockQty }}</td>
          <td>{{ product.isActive ? 'Oui' : 'Non' }}</td>
          <td>
            <a class="btn btnTiny" href="{{ path('admin_product_detail', {'id': product.productId}) }}">Voir</a>
            <a class="btn btnTiny" href="{{ path('admin_product_edit', {'id': product.productId}) }}">Ã‰diter</a>
            <a class="btn btnTiny btnInfo" href="{{ path('admin_product_add_image', {'id': product.productId}) }}">Ajouter image</a>
            <form method="post" action="{{ path('admin_product_delete', {'id': product.productId}) }}" style="display:inline;" onsubmit="return confirm('Supprimer ce produit ?');">
              <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ product.productId) }}">
              <button class="btn btnTiny btnDanger" type="submit">Supprimer</button>
            </form>
          </td>
        </tr>
        {% else %}
        <tr><td colspan="8">Aucun produit.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
    
  </section>
  
  <section class="panel">
    <div class="panelHeader">
      <div>
        <h3 class="panelTitle">SCHEMA UTILISE</h3>
        <div class="panelDesc">Tables et colonnes principales.</div>
      </div>
    </div>
    <div class="list">
      <div class="listItem"><span><b>products</b></span><span class="listMeta">product_id, name, team, price, stock_qty, is_active</span></div>
    </div>
  </section>


      
{% endblock %}

